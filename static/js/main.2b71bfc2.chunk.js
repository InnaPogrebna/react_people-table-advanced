(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{28:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(16),a=n.n(c),r=n(5),s=(n(28),n(29),n(2)),l=n(23),o=n(7),i=n(3),j=n(0),b=n(22),u=n(20),d=n(21),m=n(14),h=n.n(m),O=function(){var e=Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://mate-academy.github.io/react_people-table/api/people.json"));case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return","error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),p=(n(35),n(1)),x=function(e){var t=e.person,n=e.selectedSort,c=Object(s.f)();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("td",{className:"name"===n?"is-selected":"",children:Object(p.jsx)(r.b,{to:{pathname:"/people/".concat(t.slug),search:c.search},className:"m"===t.sex?"man":"woman",children:t.name})}),Object(p.jsx)("td",{className:"sex"===n?"is-selected":"",children:t.sex}),Object(p.jsx)("td",{className:"born"===n?"is-selected":"",children:t.born}),Object(p.jsx)("td",{className:"died"===n?"is-selected":"",children:t.died}),Object(p.jsx)("td",{children:t.mother?Object(p.jsx)(r.b,{to:{pathname:"/people/".concat(t.mother.slug),search:c.search},className:"woman",children:t.motherName}):Object(p.jsx)(p.Fragment,{children:t.motherName})}),Object(p.jsx)("td",{children:t.father?Object(p.jsx)(r.b,{to:{pathname:"/people/".concat(t.father.slug),search:c.search},className:"man",children:t.fatherName}):Object(p.jsx)(p.Fragment,{children:t.fatherName})})]})},f=(n(37),function(e){var t=e.filterPeople,n=e.getSortTable,c=e.sortOrder,a=e.selectedSort,r=Object(s.h)().slug,l=function(e){if(a===e&&c)switch(c){case"asc":return"./images/sort_asc.png";case"desc":return"./images/sort_desc.png"}return"./images/sort_both.png"},o=function(){return 0===t.length?"disabled":""};return Object(p.jsxs)("table",{className:"table table-border is-hoverable is-striped is-bordered",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsxs)("th",{onClick:function(){return n("name")},className:o(),children:[Object(p.jsx)("span",{children:"Name"}),Object(p.jsx)("img",{src:l("name"),alt:"arrow",className:"img"})]}),Object(p.jsxs)("th",{onClick:function(){return n("sex")},className:o(),children:[Object(p.jsx)("span",{children:"Sex"}),Object(p.jsx)("img",{src:l("sex"),alt:"arrow",className:"img"})]}),Object(p.jsxs)("th",{onClick:function(){return n("born")},className:o(),children:[Object(p.jsx)("span",{children:"Born"}),Object(p.jsx)("img",{src:l("born"),alt:"arrow",className:"img"})]}),Object(p.jsxs)("th",{onClick:function(){return n("died")},className:o(),children:[Object(p.jsx)("span",{children:"Died"}),Object(p.jsx)("img",{src:l("died"),alt:"arrow",className:"img"})]}),Object(p.jsx)("th",{children:"Mother"}),Object(p.jsx)("th",{children:"Father"})]})}),Object(p.jsx)("tbody",{children:t.map((function(e){return Object(p.jsx)("tr",{className:"".concat(r===e.slug?"is-selected":""),children:Object(p.jsx)(x,{person:e,selectedSort:a})},e.slug)}))})]})}),g=n(10),N=(n(38),function(e){var t=e.addNewPeople,n=e.people,c=e.setIsOpenForm,a=Object(j.useState)({name:"",sex:"m",born:0,died:0}),r=Object(i.a)(a,2),l=r[0],b=r[1],u=Object(j.useState)(""),d=Object(i.a)(u,2),m=d[0],h=d[1],O=Object(j.useState)(""),x=Object(i.a)(O,2),f=x[0],N=x[1],v=Object(j.useState)(""),w=Object(i.a)(v,2),S=w[0],C=w[1],y=Object(s.g)(),F=Object(j.useState)(!0),k=Object(i.a)(F,2),P=k[0],_=k[1],B=Object(j.useState)(""),q=Object(i.a)(B,2),M=q[0],D=q[1],L=Object(j.useState)(!0),Y=Object(i.a)(L,2),A=Y[0],I=Y[1],E=Object(j.useState)(""),H=Object(i.a)(E,2),J=H[0],R=H[1],T=function(e){return n.filter((function(t){return t.sex===e})).filter((function(e){return+e.died>+l.born&&+e.born<+l.born}))},z=function(e){h(l.name.concat(l.born.toString()));var t=new RegExp(/^(?! )[\u0410-\u042f\u0430-\u044f\u0401\u0451A-Za-z\s]+$/),n=e.target,c=n.name,a=n.value,r=n.type,s=n.checked;b((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(g.a)({},c,"checkbox"===r?s:a))})),"name"===c&&_(t.test(a))},U=function(){return!(!P||!function(){var e=l.died-l.born;return e>=0&&e<150?(I(A),!0):(I(!A),!1)}())||(D("Your name isn't validation"),R("Not valid age"),!1)},Z=function(e,t){e(t.target.value)},$=Object(j.useMemo)((function(){return T("f")}),[n,l.born]),G=Object(j.useMemo)((function(){return T("m")}),[n,l.born]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{children:"NewPerson"}),Object(p.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),l&&U()){var a=Object(o.a)(Object(o.a)({},l),{},{slug:m,motherName:S||void 0,fatherName:f||void 0,mother:n.find((function(e){return e.name===S})),father:n.find((function(e){return e.name===f}))});t(a),y("/people"),c(!1)}},className:"form",children:[Object(p.jsxs)("div",{className:"control",children:[Object(p.jsxs)("label",{className:"label",children:["Name:",Object(p.jsx)("input",{type:"text",placeholder:"Name",className:"input",name:"name",value:l.name,onChange:z,required:!0})]}),!P&&Object(p.jsx)("p",{className:"error",children:M})]}),Object(p.jsxs)("div",{className:"control",children:[Object(p.jsxs)("label",{className:"radio",htmlFor:"sex_m",children:[Object(p.jsx)("input",{type:"radio",id:"sex_m",name:"sex",value:"m",onChange:z,required:!0}),"Male"]}),Object(p.jsxs)("label",{className:"radio",htmlFor:"sex_f",children:[Object(p.jsx)("input",{type:"radio",id:"sex_f",name:"sex",value:"f",onChange:z,required:!0}),"Female"]})]}),Object(p.jsxs)("label",{htmlFor:"BornYear",className:"label",children:["Born :",Object(p.jsx)("input",{type:"number",name:"born",value:l.born,min:"1400",max:(new Date).getFullYear(),step:"1",onChange:z,required:!0})]}),Object(p.jsxs)("label",{htmlFor:"DiedYear",className:"label",children:["Died :",Object(p.jsx)("input",{type:"number",disabled:l.born<1400,name:"died",value:l.died,min:"1400",max:(new Date).getFullYear(),step:"1",onChange:z})]}),!A&&Object(p.jsx)("p",{className:"error",children:J}),Object(p.jsxs)("label",{className:"label",children:["Mother:",Object(p.jsxs)("select",{name:"motherName",disabled:l.born<1400||0===$.length,className:"select selectBlock",onChange:function(e){return Z(C,e)},children:[Object(p.jsx)("option",{value:"mother",children:"Choose mother`s name"}),$.map((function(e){return Object(p.jsx)("option",{value:e.name,children:e.name},e.slug)}))]})]}),Object(p.jsxs)("label",{className:"label",children:["Father:",Object(p.jsxs)("select",{name:"fatherName",disabled:l.born<1400||0===G.length,className:"select selectBlock",onChange:function(e){return Z(N,e)},children:[Object(p.jsx)("option",{value:"father",children:"Choose father`s name"}),G.map((function(e){return Object(p.jsx)("option",{value:e.name,children:e.name},e.slug)}))]})]}),Object(p.jsx)("button",{type:"submit",className:"button is-hovered",children:"Add"})]})]})}),v=(n(39),function(){var e=Object(j.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(s.g)(),d=Object(s.f)(),m=new URLSearchParams(d.search),h=Object(j.useState)(!1),x=Object(i.a)(h,2),g=x[0],v=x[1],w=m.get("query")||"",S=Object(j.useState)(w),C=Object(i.a)(S,2),y=C[0],F=C[1],k=m.get("sortBy")||"",P=m.get("sortOrder")||"",_=Object(j.useState)(k),B=Object(i.a)(_,2),q=B[0],M=B[1],D=Object(j.useState)(!1),L=Object(i.a)(D,2),Y=L[0],A=L[1];Object(j.useEffect)((function(){A(!0),O().then((function(e){return c(e.map((function(t){var n=e.find((function(e){return e.name===t.motherName})),c=e.find((function(e){return e.name===t.fatherName}));return Object(o.a)(Object(o.a)({},t),{},{mother:n,father:c})})))})),A(!1)}),[]);var I=Object(j.useCallback)(Object(u.debounce)((function(e){e?m.set("query",e):m.delete("query"),a("?".concat(m.toString()))}),500),[]),E=y.toLowerCase(),H=Object(j.useMemo)((function(){return n.filter((function(e){var t,n;return e.name.toLowerCase().includes(E)||(null===(t=e.motherName)||void 0===t?void 0:t.toLowerCase().includes(E))||(null===(n=e.fatherName)||void 0===n?void 0:n.toLowerCase().includes(E))})).sort((function(e,t){switch(k){case"name":case"sex":return"asc"===P?e[k].localeCompare(t[k]):t[k].localeCompare(e[k]);case"born":case"died":return"asc"===P?e[k]-t[k]:t[k]-e[k];default:return 0}}))}),[w,n,k,P]),J=function(){v(!g)};return Object(p.jsxs)("div",{className:"peoplePage",children:[Object(p.jsx)("h1",{className:"title",children:"People Page"}),g&&Object(p.jsx)(N,{addNewPeople:function(e){c((function(t){return[].concat(Object(l.a)(t),[e])}))},people:n,setIsOpenForm:v}),g?Object(p.jsx)(r.b,{to:"/people",onClick:J,children:Object(p.jsx)("p",{className:"button btn",children:"Close"})}):Object(p.jsx)(r.b,{to:"new",onClick:J,children:Object(p.jsx)("p",{className:"button",children:"Add new person"})}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{className:"input is-normal inputMargin",style:{width:"350px",marginBottom:"10px"},type:"text","data-cy":"filterInput",placeholder:"filter table",value:y,onChange:function(e){F(e.target.value),I(e.target.value)}})}),Y?Object(p.jsx)(b.a,{color:"blue"}):Object(p.jsx)(f,{filterPeople:H,getSortTable:function(e){"asc"===P?m.set("sortOrder","desc"):m.set("sortOrder","asc"),m.set("sortBy",e),M(e),a("?".concat(m.toString()))},sortOrder:P,selectedSort:q}),0===H.length&&Object(p.jsx)("p",{children:"No results"})]})}),w=function(){return Object(p.jsx)("h1",{className:"title",children:"Home page"})},S=function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("header",{children:Object(p.jsxs)("nav",{className:"navbar",children:[Object(p.jsx)(r.b,{className:"navbar-item",to:"/",children:"Home page"}),Object(p.jsx)(r.b,{className:"navbar-item",to:"/people",children:"People page"})]})}),Object(p.jsxs)(s.d,{children:[Object(p.jsx)(s.b,{path:"/",element:Object(p.jsx)(w,{})}),Object(p.jsx)(s.b,{path:"people",element:Object(p.jsx)(v,{}),children:Object(p.jsx)(s.b,{path:":slug",element:Object(p.jsx)(v,{})})}),Object(p.jsx)(s.b,{path:"*",element:Object(p.jsx)("p",{children:"Page not found"})}),Object(p.jsx)(s.b,{path:"/home",element:Object(p.jsx)(s.a,{replace:!0,to:"/"})})]})]})};a.a.render(Object(p.jsx)(r.a,{children:Object(p.jsx)(S,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.2b71bfc2.chunk.js.map