(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{28:function(e,t,c){},35:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){"use strict";c.r(t);var n=c(16),a=c.n(n),r=c(5),s=(c(28),c(29),c(2)),l=c(23),o=c(7),i=c(3),j=c(0),b=c(22),u=c(20),d=c(21),m=c(14),h=c.n(m),O=function(){var e=Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://mate-academy.github.io/react_people-table/api/people.json"));case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return","error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),p=(c(35),c(1)),x=function(e){var t=e.person,c=e.selectedSort,n=Object(s.f)();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("td",{className:"name"===c?"is-selected":"",children:Object(p.jsx)(r.b,{to:{pathname:"/people/".concat(t.slug),search:n.search},className:"m"===t.sex?"man":"woman",children:t.name})}),Object(p.jsx)("td",{className:"sex"===c?"is-selected":"",children:t.sex}),Object(p.jsx)("td",{className:"born"===c?"is-selected":"",children:t.born}),Object(p.jsx)("td",{className:"died"===c?"is-selected":"",children:t.died}),Object(p.jsx)("td",{children:t.mother?Object(p.jsx)(r.b,{to:{pathname:"/people/".concat(t.mother.slug),search:n.search},className:"woman",children:t.motherName}):Object(p.jsx)(p.Fragment,{children:t.motherName})}),Object(p.jsx)("td",{children:t.father?Object(p.jsx)(r.b,{to:{pathname:"/people/".concat(t.father.slug),search:n.search},className:"man",children:t.fatherName}):Object(p.jsx)(p.Fragment,{children:t.fatherName})})]})},f=(c(37),function(e){var t=e.filterPeople,c=e.getSortTable,n=e.sortOrder,a=e.selectedSort,r=Object(s.h)().slug,l=function(e){if(a===e&&n)switch(n){case"asc":return"./images/sort_asc.png";case"desc":return"./images/sort_desc.png"}return"./images/sort_both.png"};return Object(p.jsxs)("table",{className:"table table-border is-hoverable is-striped is-bordered",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsxs)("th",{onClick:function(){return c("name")},children:[Object(p.jsx)("span",{children:"Name"}),Object(p.jsx)("img",{src:l("name"),alt:"arrow",className:"img"})]}),Object(p.jsxs)("th",{onClick:function(){return c("sex")},children:[Object(p.jsx)("span",{children:"Sex"}),Object(p.jsx)("img",{src:l("sex"),alt:"arrow",className:"img"})]}),Object(p.jsxs)("th",{onClick:function(){return c("born")},children:[Object(p.jsx)("span",{children:"Born"}),Object(p.jsx)("img",{src:l("born"),alt:"arrow",className:"img"})]}),Object(p.jsxs)("th",{onClick:function(){return c("died")},children:[Object(p.jsx)("span",{children:"Died"}),Object(p.jsx)("img",{src:l("died"),alt:"arrow",className:"img"})]}),Object(p.jsx)("th",{children:"Mother"}),Object(p.jsx)("th",{children:"Father"})]})}),Object(p.jsx)("tbody",{children:t.map((function(e){return Object(p.jsx)("tr",{className:"".concat(r===e.slug?"is-selected":""),children:Object(p.jsx)(x,{person:e,selectedSort:a})},e.slug)}))})]})}),g=c(10),N=(c(38),function(e){var t=e.addNewPeople,c=e.people,n=e.setIsOpenForm,a=Object(j.useState)({name:"",sex:"m",born:Number("0"),died:Number("0")}),r=Object(i.a)(a,2),l=r[0],b=r[1],u=Object(j.useState)(""),d=Object(i.a)(u,2),m=d[0],h=d[1],O=Object(j.useState)(""),x=Object(i.a)(O,2),f=x[0],N=x[1],v=Object(j.useState)(""),w=Object(i.a)(v,2),S=w[0],C=w[1],y=Object(s.g)(),k=Object(j.useState)(!0),F=Object(i.a)(k,2),P=F[0],_=F[1],B=Object(j.useState)(""),q=Object(i.a)(B,2),M=q[0],D=q[1],L=Object(j.useState)(!0),Y=Object(i.a)(L,2),A=Y[0],I=Y[1],E=Object(j.useState)(""),H=Object(i.a)(E,2),J=H[0],R=H[1],T=function(e){return c.filter((function(t){return t.sex===e})).filter((function(e){return+e.died>+l.born&&+e.born<+l.born}))},z=function(e){h(l.name.concat(l.born.toString()));var t=new RegExp(/^([\u0410-\u042f\u0430-\u044f\u0401\u0451A-Za-z\s]+$)/),c=e.target,n=c.name,a=c.value,r=c.type,s=c.checked;b((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(g.a)({},n,"checkbox"===r?s:a))})),"name"===n&&_(t.test(a))},U=function(){return!(!P||!function(){var e=l.died-l.born;return e>=0&&e<150?(I(A),!0):(I(!A),!1)}())||(D("Your name isn't validation"),R("Not valid age"),!1)},Z=function(e,t){e(t.target.value)},$=Object(j.useMemo)((function(){return T("f")}),[c,l.born]),G=Object(j.useMemo)((function(){return T("m")}),[c,l.born]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{children:"NewPerson"}),Object(p.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),l&&U()){var c=Object(o.a)(Object(o.a)({},l),{},{slug:m,motherName:S||void 0,fatherName:f||void 0});t(c),y("/people"),n(!1)}},className:"form",children:[Object(p.jsxs)("div",{className:"control",children:[Object(p.jsxs)("label",{className:"label",children:["Name:",Object(p.jsx)("input",{type:"text",placeholder:"Name",className:"input",name:"name",value:l.name,onChange:z,required:!0})]}),!P&&Object(p.jsx)("p",{className:"error",children:M})]}),Object(p.jsxs)("div",{className:"control",children:[Object(p.jsxs)("label",{className:"radio",htmlFor:"sex_m",children:[Object(p.jsx)("input",{type:"radio",id:"sex_m",name:"sex",value:"m",onChange:z,required:!0}),"Male"]}),Object(p.jsxs)("label",{className:"radio",htmlFor:"sex_f",children:[Object(p.jsx)("input",{type:"radio",id:"sex_f",name:"sex",value:"f",onChange:z,required:!0}),"Female"]})]}),Object(p.jsxs)("label",{htmlFor:"BornYear",className:"label",children:["Born :",Object(p.jsx)("input",{type:"number",name:"born",value:l.born,min:"1400",max:(new Date).getFullYear(),step:"1",onChange:z,required:!0})]}),Object(p.jsxs)("label",{htmlFor:"DiedYear",className:"label",children:["Died :",Object(p.jsx)("input",{type:"number",disabled:l.born<1400,name:"died",value:l.died,min:"1400",max:(new Date).getFullYear(),step:"1",onChange:z})]}),!A&&Object(p.jsx)("p",{className:"error",children:J}),Object(p.jsxs)("label",{className:"label",children:["Mother:",Object(p.jsxs)("select",{name:"motherName",disabled:l.born<1400||0===$.length,className:"select selectBlock",onChange:function(e){return Z(C,e)},children:[Object(p.jsx)("option",{value:"mother",children:"Choose mother`s name"}),$.map((function(e){return Object(p.jsx)("option",{value:e.name,children:e.name},e.slug)}))]})]}),Object(p.jsxs)("label",{className:"label",children:["Father:",Object(p.jsxs)("select",{name:"fatherName",disabled:l.born<1400||0===G.length,className:"select selectBlock",onChange:function(e){return Z(N,e)},children:[Object(p.jsx)("option",{value:"father",children:"Choose father`s name"}),G.map((function(e){return Object(p.jsx)("option",{value:e.name,children:e.name},e.slug)}))]})]}),Object(p.jsx)("button",{type:"submit",className:"button is-hovered",children:"Add"})]})]})}),v=(c(39),function(){var e=Object(j.useState)([]),t=Object(i.a)(e,2),c=t[0],n=t[1],a=Object(s.g)(),d=Object(s.f)(),m=new URLSearchParams(d.search),h=Object(j.useState)("asc"),x=Object(i.a)(h,2),g=x[0],v=x[1],w=Object(j.useState)(""),S=Object(i.a)(w,2),C=S[0],y=S[1],k=Object(j.useState)(!1),F=Object(i.a)(k,2),P=F[0],_=F[1],B=m.get("query")||"",q=Object(j.useState)(B),M=Object(i.a)(q,2),D=M[0],L=M[1];Object(j.useEffect)((function(){O().then((function(e){return n(e.map((function(t){var c=e.find((function(e){return e.name===t.motherName})),n=e.find((function(e){return e.name===t.fatherName}));return Object(o.a)(Object(o.a)({},t),{},{mother:c,father:n})})))}))}),[]);var Y=Object(j.useCallback)(Object(u.debounce)((function(e){e?m.set("query",e):m.delete("query"),a("?".concat(m.toString()))}),500),[]),A=function(e,t){t?m.set(e,t):m.delete(e),a("?".concat(m.toString()))},I=D.toLowerCase(),E=Object(j.useMemo)((function(){return c.filter((function(e){var t,c;return e.name.toLowerCase().includes(I)||(null===(t=e.motherName)||void 0===t?void 0:t.toLowerCase().includes(I))||(null===(c=e.fatherName)||void 0===c?void 0:c.toLowerCase().includes(I))}))}),[B,c]),H=function(){_(!P)};return Object(p.jsxs)("div",{className:"peoplePage",children:[Object(p.jsx)("h1",{className:"title",children:"People Page"}),P&&Object(p.jsx)(N,{addNewPeople:function(e){n((function(t){return[].concat(Object(l.a)(t),[e])}))},people:c,setIsOpenForm:_}),P?Object(p.jsx)(r.b,{to:"/people",onClick:H,children:Object(p.jsx)("p",{className:"button btn",children:"Close"})}):Object(p.jsx)(r.b,{to:"new",onClick:H,children:Object(p.jsx)("p",{className:"button",children:"Add new person"})}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{className:"input is-normal inputMargin",style:{width:"350px",marginBottom:"10px"},type:"text","data-cy":"filterInput",placeholder:"filter table",value:D,onChange:function(e){L(e.target.value),Y(e.target.value)}})}),0===E.length?Object(p.jsx)(b.a,{color:"blue"}):Object(p.jsx)(f,{filterPeople:E,getSortTable:function(e){switch(y(e),A("sortBy",C),A("sortOrder",g),g){case"asc":switch(e){case"name":case"sex":E.sort((function(t,c){return t[e].localeCompare(c[e])})),v("desc");break;case"born":case"died":E.sort((function(t,c){return t[e]-c[e]})),v("desc")}break;case"desc":switch(e){case"name":case"sex":E.sort((function(t,c){return c[e].localeCompare(t[e])})),v("asc");break;case"born":case"died":E.sort((function(t,c){return c[e]-t[e]})),v("asc")}}},sortOrder:g,selectedSort:C})]})}),w=function(){return Object(p.jsx)("h1",{className:"title",children:"Home page"})},S=function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("header",{children:Object(p.jsxs)("nav",{className:"navbar",children:[Object(p.jsx)(r.b,{className:"navbar-item",to:"/",children:"Home page"}),Object(p.jsx)(r.b,{className:"navbar-item",to:"/people",children:"People page"})]})}),Object(p.jsxs)(s.d,{children:[Object(p.jsx)(s.b,{path:"/",element:Object(p.jsx)(w,{})}),Object(p.jsx)(s.b,{path:"people/",element:Object(p.jsx)(v,{}),children:Object(p.jsx)(s.b,{path:":slug",element:Object(p.jsx)(p.Fragment,{})})}),Object(p.jsx)(s.b,{path:"*",element:Object(p.jsx)("p",{children:"Page not found"})}),Object(p.jsx)(s.b,{path:"/home",element:Object(p.jsx)(s.a,{replace:!0,to:"/"})})]})]})};a.a.render(Object(p.jsx)(r.a,{children:Object(p.jsx)(S,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.7769bdb2.chunk.js.map